{% extends 'admin_dashboard.html' %}
{% load static %}

{% block title %}Delete Category{% endblock %}

{% block content %}
<div class="wrapper">
    <div class="nav-buttons">
        <a href="{% url 'manage_categories' %}" class="btn">
            <span>←</span> Back to Categories
        </a>
    </div>

    <h1 class="h1">Delete Category</h1>
    <p class="small">Confirm deletion of the selected category</p>

    <div class="panel" style="border-color: #dc2626;">
        <div style="padding: 12px 16px; background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; margin-bottom: 20px; color: #991b1b;">
            <strong>⚠️ Warning!</strong> This action cannot be undone. All data associated with this category will be permanently removed.
        </div>

        <h3 class="panel-title" style="color: #dc2626;">Confirm Category Deletion</h3>
        
        <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #dc2626; margin-bottom: 20px;">
            <div class="grid">
                <div class="col-6">
                    <div><strong>Category Name:</strong></div>
                    <div style="font-size: 18px; color: #dc2626; margin-top: 4px;">{{ category.name }}</div>
                </div>
                <div class="col-6">
                    <div><strong>Category ID:</strong></div>
                    <div style="font-size: 16px; margin-top: 4px;">{{ category.id }}</div>
                </div>
                <div class="col-6">
                    <div><strong>Slug:</strong></div>
                    <div style="margin-top: 4px;"><code>{{ category.slug }}</code></div>
                </div>
                <div class="col-6">
                    <div><strong>Created:</strong></div>
                    <div style="margin-top: 4px;">{{ category.created_at|date:"F d, Y g:i A" }}</div>
                </div>
                {% if category.description %}
                <div class="col-12">
                    <div><strong>Description:</strong></div>
                    <div style="margin-top: 4px;">{{ category.description }}</div>
                </div>
                {% endif %}
            </div>
        </div>

        <form method="post" onsubmit="return confirmDelete(this)">
            {% csrf_token %}
            <div class="actions">
                <button type="submit" class="btn btn-danger">
                    <span class="spinner" style="display: none;"></span>
                    <span class="btn-text">Yes, Delete Category</span>
                </button>
                <a href="{% url 'manage_categories' %}" class="btn">Cancel</a>
            </div>
        </form>
    </div>
</div>

<script>
function confirmDelete(form) {
    const confirmed = confirm('Are you absolutely sure you want to delete this category? This action cannot be undone.');
    
    if (confirmed) {
        const btn = form.querySelector('button[type="submit"]');
        const spinner = btn.querySelector('.spinner');
        const text = btn.querySelector('.btn-text');
        
        spinner.style.display = 'inline-block';
        text.textContent = 'Deleting...';
        btn.classList.add('btn-loading');
    }
    
    return confirmed;
}
</script>
{% endblock %}

