{% extends 'admin_dashboard.html' %}
{% block title %}Other Details Management{% endblock %}
{% block content %}
{% include 'message.html' %}
<style>
a:-webkit-any-link {
    text-decoration: none;
}
</style>
<div class="ad-main-content">
    <div class="ad-page-header">
        <h1><i class="fas fa-chart-bar"></i> Other Details Management</h1>
        <p>Manage statistics cards and CTA sections</p>
    </div>
    
    <!-- Stats Cards Section -->
    <div class="ad-card">
        <div class="ad-card-header">
            <h2><i class="fas fa-chart-line"></i> Statistics Cards</h2>
            <a href="{% url 'stat_card_create' %}" class="ad-btn ad-btn-primary">
                <i class="fas fa-plus"></i> Add Stat Card
            </a>
        </div>
        <div class="ad-card-body">
            <!-- Live Preview -->
            <div class="stats-preview-container">
                <h3><i class="fas fa-eye"></i> Live Preview</h3>
                <div class="stats-preview">
                    {% for stat in stat_cards %}
                        {% if stat.is_active %}
                            <div class="stat-card-preview">
                                <div class="stat-icon">
                                    {% if stat.icon_type == 'font_awesome' and stat.icon %}
                                        <i class="fas fa-{{ stat.icon }}" style="color: {{ stat.icon_color|default:'#007bff' }};"></i>
                                    {% elif stat.icon_type == 'image' and stat.icon_image %}
                                        <img src="{{ stat.icon_image.url }}" alt="{{ stat.label }}" class="custom-icon-preview">
                                    {% elif stat.icon %}
                                        <!-- Fallback for old data without icon_type -->
                                        <i class="fas fa-{{ stat.icon }}" style="color: {{ stat.icon_color|default:'#007bff' }};"></i>
                                    {% else %}
                                        <i class="fas fa-question-circle" style="color: #6c757d;"></i>
                                    {% endif %}
                                </div>
                                <div class="stat-number">{{ stat.number }}</div>
                                <div class="stat-label">{{ stat.label }}</div>
                            </div>
                        {% endif %}
                    {% empty %}
                        <p class="ad-empty-state">No active stat cards</p>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Stats Table -->
            {% if stat_cards %}
                <div class="ad-table-container">
                    <table class="ad-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Type</th>
                                <th>Number</th>
                                <th>Label</th>
                                <th>Status</th>
                                <th>Order</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for stat in stat_cards %}
                                <tr {% if not stat.is_active %}class="ad-inactive"{% endif %}>
                                    <td class="icon-cell">
                                        {% if stat.icon_type == 'font_awesome' and stat.icon %}
                                            <i class="fas fa-{{ stat.icon }}" style="color: {{ stat.icon_color|default:'#007bff' }};"></i>
                                        {% elif stat.icon_type == 'image' and stat.icon_image %}
                                            <img src="{{ stat.icon_image.url }}" alt="{{ stat.label }}" style="width: 20px; height: 20px; object-fit: contain;">
                                        {% elif stat.icon %}
                                            <!-- Fallback for old data without icon_type -->
                                            <i class="fas fa-{{ stat.icon }}" style="color: {{ stat.icon_color|default:'#007bff' }};"></i>
                                        {% else %}
                                            <i class="fas fa-question-circle" style="color: #6c757d;"></i>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if stat.icon_type == 'font_awesome' %}
                                            <span class="badge badge-primary">Font Awesome</span>
                                        {% elif stat.icon_type == 'image' %}
                                            <span class="badge badge-success">Custom Image</span>
                                        {% else %}
                                            <span class="badge badge-secondary">Legacy</span>
                                        {% endif %}
                                    </td>
                                    <td><strong>{{ stat.number }}</strong></td>
                                    <td>{{ stat.label }}</td>
                                    <td>
                                        {% if stat.is_active %}
                                            <span class="ad-status ad-active">Active</span>
                                        {% else %}
                                            <span class="ad-status ad-inactive">Inactive</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ stat.order }}</td>
                                    <td class="ad-actions">
                                        <div class="action-buttons">
                                            <a href="{% url 'stat_card_edit' stat.pk %}" 
                                               class="action-btn edit-btn" 
                                               title="Edit Stat Card">
                                                <span class="btn-icon"><i class="fas fa-edit"></i></span>
                                                <span class="btn-text">Edit</span>
                                            </a>
                                            <a href="{% url 'stat_card_toggle_status' stat.pk %}" 
                                               class="action-btn {% if stat.is_active %}hide-btn{% else %}show-btn{% endif %}" 
                                               title="{% if stat.is_active %}Deactivate{% else %}Activate{% endif %}">
                                                <span class="btn-icon">
                                                    {% if stat.is_active %}
                                                        <i class="fas fa-eye-slash"></i>
                                                    {% else %}
                                                        <i class="fas fa-eye"></i>
                                                    {% endif %}
                                                </span>
                                                <span class="btn-text">{% if stat.is_active %}Hide{% else %}Show{% endif %}</span>
                                            </a>
                                            <a href="{% url 'stat_card_delete' stat.pk %}" 
                                               onclick="return confirm('Are you sure you want to delete this stat card?')" 
                                               class="action-btn delete-btn" 
                                               title="Delete Stat Card">
                                                <span class="btn-icon"><i class="fas fa-trash"></i></span>
                                                <span class="btn-text">Delete</span>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="ad-empty-state">
                    <h3>No stat cards created yet</h3>
                    <p>Create your first stat card to display statistics on your website.</p>
                    <a href="{% url 'stat_card_create' %}" class="ad-btn ad-btn-primary">Create First Stat Card</a>
                </div>
            {% endif %}
        </div>
    </div>
    
    <!-- CTA Sections -->
    <div class="ad-card">
        <div class="ad-card-header">
            <h2><i class="fas fa-bullhorn"></i> CTA Sections</h2>
            <a href="{% url 'cta_section_create' %}" class="ad-btn ad-btn-primary">
                <i class="fas fa-plus"></i> Add CTA Section
            </a>
        </div>
        <div class="ad-card-body">
            <!-- CTA Preview -->
            <div class="cta-preview-container">
                <h3><i class="fas fa-eye"></i> Live Preview</h3>
                {% for cta in cta_sections %}
                    {% if cta.is_active %}
                        <div class="cta-preview">
                            <div class="cta-title">{{ cta.title }}</div>
                            <button class="cta-btn-preview">{{ cta.button_text }}</button>
                        </div>
                    {% endif %}
                {% empty %}
                    <p class="ad-empty-state">No active CTA sections</p>
                {% endfor %}
            </div>
            
            <!-- CTA Table -->
            {% if cta_sections %}
                <div class="ad-table-container">
                    <table class="ad-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Button Text</th>
                                <th>Button Link</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for cta in cta_sections %}
                                <tr {% if not cta.is_active %}class="ad-inactive"{% endif %}>
                                    <td><strong>{{ cta.title }}</strong></td>
                                    <td>{{ cta.button_text }}</td>
                                    <td>
                                        {% if cta.button_link %}
                                            <small class="text-muted">{{ cta.button_link|truncatechars:30 }}</small>
                                        {% else %}
                                            <small class="text-muted">No link</small>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if cta.is_active %}
                                            <span class="ad-status ad-active">Active</span>
                                        {% else %}
                                            <span class="ad-status ad-inactive">Inactive</span>
                                        {% endif %}
                                    </td>
                                    <td class="ad-actions">
                                        <div class="action-buttons">
                                            <a href="{% url 'cta_section_edit' cta.pk %}" 
                                               class="action-btn edit-btn" 
                                               title="Edit CTA Section">
                                                <span class="btn-icon"><i class="fas fa-edit"></i></span>
                                                <span class="btn-text">Edit</span>
                                            </a>
                                            <a href="{% url 'cta_section_toggle_status' cta.pk %}" 
                                               class="action-btn {% if cta.is_active %}hide-btn{% else %}show-btn{% endif %}" 
                                               title="{% if cta.is_active %}Deactivate{% else %}Activate{% endif %}">
                                                <span class="btn-icon">
                                                    {% if cta.is_active %}
                                                        <i class="fas fa-eye-slash"></i>
                                                    {% else %}
                                                        <i class="fas fa-eye"></i>
                                                    {% endif %}
                                                </span>
                                                <span class="btn-text">{% if cta.is_active %}Hide{% else %}Show{% endif %}</span>
                                            </a>
                                            <a href="{% url 'cta_section_delete' cta.pk %}" 
                                               onclick="return confirm('Are you sure you want to delete this CTA section?')" 
                                               class="action-btn delete-btn" 
                                               title="Delete CTA Section">
                                                <span class="btn-icon"><i class="fas fa-trash"></i></span>
                                                <span class="btn-text">Delete</span>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="ad-empty-state">
                    <h3>No CTA sections created yet</h3>
                    <p>Create your first CTA section to display call-to-action content.</p>
                    <a href="{% url 'cta_section_create' %}" class="ad-btn ad-btn-primary">Create First CTA Section</a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
/* Stats Preview Styles */
.stats-preview-container {
    margin-bottom: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
}

.stats-preview {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 15px;
}

.stat-card-preview {
    background: white;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    min-width: 150px;
    transition: transform 0.3s ease;
}

.stat-card-preview:hover {
    transform: translateY(-5px);
}

.stat-card-preview .stat-icon {
    font-size: 32px;
    margin-bottom: 10px;
    color: #007bff;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 40px;
}

.stat-card-preview .stat-icon i {
    font-size: inherit;
}

.stat-card-preview .stat-number {
    font-size: 24px;
    font-weight: bold;
    color: #007bff;
    margin-bottom: 5px;
}

.stat-card-preview .stat-label {
    font-size: 14px;
    color: #6c757d;
    font-weight: 500;
}

/* Custom Icon Styles */
.custom-icon-preview {
    width: 32px;
    height: 32px;
    object-fit: contain;
    max-width: 100%;
    max-height: 100%;
}

/* Badge Styles */
.badge {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 12px;
    font-weight: 500;
    color: white;
}

.badge-primary {
    background-color: #007bff;
}

.badge-success {
    background-color: #28a745;
}

.badge-secondary {
    background-color: #6c757d;
}

/* CTA Preview Styles */
.cta-preview-container {
    margin-bottom: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
}

.cta-preview {
    text-align: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 30px;
    border-radius: 12px;
    margin-top: 15px;
}

.cta-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
    line-height: 1.4;
}

.cta-btn-preview {
    background: #ffc107;
    color: #000;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.cta-btn-preview:hover {
    background: #ffca28;
    transform: scale(1.05);
}

/* Table Styles */
.icon-cell {
    font-size: 20px;
    text-align: center;
    padding: 12px;
}

.ad-table-container {
    overflow-x: auto;
    margin-top: 20px;
}

.ad-table {
    width: 100%;
    border-collapse: collapse;
}

.ad-table th,
.ad-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #dee2e6;
    vertical-align: middle;
}

.ad-table th {
    background-color: #f8f9fa;
    font-weight: 600;
}

.ad-table tr.ad-inactive {
    opacity: 0.6;
    background-color: #f8f9fa;
}

/* Action Buttons */
.ad-actions {
    white-space: nowrap;
    min-width: 200px;
}

.action-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.action-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none !important;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    cursor: pointer;
}

.action-btn:hover,
.action-btn:focus,
.action-btn:active,
.action-btn:visited {
    text-decoration: none !important;
}

.btn-icon {
    font-size: 14px;
}

.btn-text {
    font-size: 12px;
    line-height: 1;
}

.edit-btn {
    background: #e3f2fd;
    color: #1976d2;
    border-color: #bbdefb;
}

.edit-btn:hover {
    background: #bbdefb;
    color: #0d47a1;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(25, 118, 210, 0.2);
}

.hide-btn {
    background: #fff3e0;
    color: #f57c00;
    border-color: #ffcc02;
}

.hide-btn:hover {
    background: #ffcc02;
    color: #e65100;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(245, 124, 0, 0.2);
}

.show-btn {
    background: #e8f5e8;
    color: #2e7d32;
    border-color: #81c784;
}

.show-btn:hover {
    background: #81c784;
    color: #1b5e20;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(46, 125, 50, 0.2);
}

.delete-btn {
    background: #ffebee;
    color: #d32f2f;
    border-color: #ffcdd2;
}

.delete-btn:hover {
    background: #ffcdd2;
    color: #b71c1c;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(211, 47, 47, 0.2);
}

.ad-status.ad-active {
    color: #28a745;
    font-weight: 500;
}

.ad-status.ad-inactive {
    color: #dc3545;
    font-weight: 500;
}

.ad-empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #6c757d;
}

.ad-empty-state h3 {
    margin-bottom: 10px;
    color: #495057;
}

.text-muted {
    color: #6c757d !important;
}

/* Responsive Design */
@media (max-width: 768px) {
    .stats-preview {
        flex-direction: column;
        align-items: center;
    }
    
    .stat-card-preview {
        min-width: 100%;
        max-width: 200px;
    }
    
    .action-buttons {
        flex-direction: column;
        gap: 4px;
    }
    
    .action-btn {
        justify-content: center;
        padding: 8px 12px;
    }
    
    .ad-table-container {
        font-size: 14px;
    }
    
    .ad-table th,
    .ad-table td {
        padding: 8px;
    }
}

@media (max-width: 480px) {
    .action-btn {
        padding: 6px 8px;
        font-size: 12px;
    }
    
    .btn-text {
        display: none;
    }
    
    .btn-icon {
        font-size: 16px;
    }
    
    .badge {
        font-size: 9px;
        padding: 1px 4px;
    }
    
    .stat-card-preview .stat-icon {
        font-size: 28px;
        height: 36px;
    }
    
    .custom-icon-preview {
        width: 28px;
        height: 28px;
    }
}

/* Enhanced Icon Display */
.icon-cell img {
    border-radius: 2px;
    border: 1px solid rgba(0,0,0,0.1);
}

.stat-card-preview .stat-icon img {
    border-radius: 4px;
    border: 1px solid rgba(0,0,0,0.1);
}
</style>
{% endblock %}
